# 快速将用户系统换成自己的用户系统

antflow完全接管了activiti的用户系统。antflow用户、角色都是demo，设计的极其简单（比activiti里面的要简单很多）。之所以要这样，并不是因为大道至简。相反，根据笔者多年的工作经验，每个系统都有自己的有用户组织架构系统，有的可能不是很复杂，有的则非常复杂。一套通用的设计往往难以包囊所有的用户场景。用过activiti内置用户系统的老用户可能深有体会。antflow把activiti的用户系统接管过来，并没有用一套可能包容性更强的用户组织系统来替换它。相反使用了更为简单的、高度抽象的、可以极其容易替换的用户组织构架系统。


## 1. 改写Userservice里的ResultAndPage `<BaseIdTranStruVo>` SelectUserPageList(Page `<BaseIdTranStruVo>` page, TaskMgmtVO taskMgmtVo);方法

> 之所以要改写这个方法，是因为页面上指定人员（或者其它使用人员的地方都用的是这个方法）



## 2.改写List `<BaseIdTranStruVo>` QueryUserByIds(IEnumerable `<String>` userIds);

## 3.BaseIdTranStruVo QueryUserById(string userId);二者分别是，根据用户id集合找到用户信息，根据单个用户Id找到单个用户信息

> 没有亲自尝试过的用户可能会有疑问，改写会不会很难？实际上担心是多余的，改写非常容易，不管你的用户表是什么样的。但是至少会包含用的Id和名字信息。`BaseIdTranStruVo`只有两个字段
>
> id和name。

通过以上改造，用户就可将一个现有不用的审批人规则改造来适配自己的业务.


## 4.用户也可以不改写UserService，而是自己实现AfUserService，然后将自己的实现标注上@Primary以覆盖默认的。

用户可能还会有一种思维势，就是用户系统必须从数据库查，其实不是必须的。也可以通过接口获取，甚至写死几个值。只需要返回的数据的结构是

`BaseIdTranStruVo`类型，包含用户的id和名字即可。
